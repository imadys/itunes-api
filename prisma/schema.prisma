generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Podcast {
  id                     Int       @id @default(autoincrement())
  trackId                Int       @unique
  trackName              String
  artistName             String
  collectionName         String?
  trackViewUrl           String
  artworkUrl30           String?
  artworkUrl60           String?
  artworkUrl100          String?
  artworkUrl600          String?
  collectionPrice        Float?
  trackPrice             Float?
  releaseDate            DateTime?
  collectionExplicitness String?
  trackExplicitness      String?
  trackCount             Int?
  country                String
  currency               String?
  primaryGenreName       String?
  contentAdvisoryRating  String?
  feedUrl                String?
  genres                 String[]
  searchKeyword          String
  createdAt              DateTime  @default(now())
  updatedAt              DateTime  @updatedAt

  // Relations
  episodes               Episode[]

  @@map("podcasts")
}

model Episode {
  id               Int       @id @default(autoincrement())
  title            String
  description      String?
  enclosureUrl     String?
  enclosureType    String?
  enclosureLength  Int?
  pubDate          DateTime?
  duration         String?
  explicit         Boolean?  @default(false)
  episodeNumber    Int?
  seasonNumber     Int?
  episodeType      String?   // full, trailer, bonus
  image            String?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  // Relations
  podcastId        Int
  podcast          Podcast   @relation(fields: [podcastId], references: [id], onDelete: Cascade)

  @@map("episodes")
}
